<prx-page-header title="USUARIO Registros" pre="Registros"></prx-page-header>

<div class="container-fluid">

  <div  class="row">
    <div class="mb-3 float-right">
      <div class="btn-group mr-2">
        <form class="form-inline my-2 my-lg-0 justify-content-center">
          <input name="searchTerm" #searchInput="ngModel" class="form-control mr-sm-2" ngModel
          (ngModelChange)="searchUsers(searchInput.value)" type="search" placeholder="Search users...">
       </form>
        <button [hidden]="!isAdmin" type="button" class="btn btn-info" data-toggle="modal" data-target="#addUserModal">
          <i class="fa fa-plus"></i>New User
        </button>
      </div>
      <div class="btn-group">
        <button type="button" (click)="getUsers(true)" class="btn btn-info">
          <i *ngIf="refreshing" class="fas fa-sync fa-spin"></i><i *ngIf="!refreshing" class="fas fa-sync"></i>
        </button>
      </div>
    </div>
    <table class="table table-hover">
      <thead class="table-borderless">
        <tr class="text-center">
          <th>Photo</th>
          <th>User ID</th>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Username</th>
          <th>Email</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody *ngFor="let appUser of users">
        <tr class="text-center">
          <td (click)="onSelectUser(appUser)">
            <img height="40" width="40" src="{{appUser?.profileImageUrl}}" class="rounded-circle img-fluid img-thumbnail" alt=""/>
          </td>
          <td (click)="onSelectUser(appUser)">{{appUser?.userId}}</td>
          <td (click)="onSelectUser(appUser)">{{appUser?.firstName}}</td>
          <td (click)="onSelectUser(appUser)">{{appUser?.lastName}}</td>
          <td (click)="onSelectUser(appUser)">{{appUser?.username}}</td>
          <td (click)="onSelectUser(appUser)">{{appUser?.email}}</td>
          <td (click)="onSelectUser(appUser)">
            <span [hidden]="!appUser?.active" class="badge badge-success">Active</span>
            <span [hidden]="appUser?.active" class="badge badge-danger">Inactive</span>
          </td>
          <td class="">
            <div class="btn-group">
              <button class="btn btn-outline-info" (click)="onEditUser(appUser)"><i class="fas fa-edit"></i></button>
              <button [hidden]="!isAdmin" class="btn btn-outline-danger" (click)="onDeleteUder(appUser?.username)"><i class="fas fa-trash"></i></button>
            </div> 
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- <div class="container-fluid">
  <div class="row">
    <div class="col-md-7 order-md-last">
      <prx-crm-news></prx-crm-news>
    </div>
    <div class="col-md-5">
      <prx-crm-statistics></prx-crm-statistics>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-8">
      <prx-crm-revenue></prx-crm-revenue>
    </div>

    <div class="col-lg-4">
      <prx-crm-tasks></prx-crm-tasks>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-5">
      <prx-crm-projects></prx-crm-projects>
    </div>

    <div class="col-lg-7">
      <prx-crm-sales></prx-crm-sales>
    </div>
  </div>

  <prx-crm-latest-tickets></prx-crm-latest-tickets>
</div> -->
